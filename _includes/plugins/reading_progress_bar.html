<!-- Reading Progress Bar -->
{% if site.ReadingProgressBar %}

<style>
div#reading-progress {
    height: 3px;
}

.fixed-top {
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    z-index: 1030;
}
</style>

<div class="progress fixed-top" id="reading-progress">
    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
</div>

<script>
 $(window).bind('scroll', function () {
     <!-- var percent = $(window).scrollTop() / ($('body').height() - $(window).height()) -->

     var headerHeight, postHeight, postInfoHeight, postTagsHeight, pagerHeight;

     headerHeight = document.querySelectorAll('header .container')[0].clientHeight;
     postHeight = document.querySelectorAll('article .container')[0].clientHeight;
     postInfoHeight = document.getElementsByClassName('post-info')[0].offsetHeight;
     postTagsHeight = document.getElementsByClassName('post-tag')[0].offsetHeight;
     pagerHeight = document.getElementsByClassName('post-navigation')[0].offsetHeight;

     var readHeight = $(window).scrollTop() - headerHeight;
     var contentHeight = postHeight - postInfoHeight - 2 * postTagsHeight - pagerHeight;
     var percent;

     if (readHeight < 0) {
         percent = 0;
     } else {
         percent = readHeight / contentHeight;
     }

     $('div#reading-progress').find('.progress-bar').css('width', percent * 100 + '%');
 });
</script>
{% endif %}
